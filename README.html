<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="pl">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="Author" content="Michalis Kamburelis">
  <meta name="Language" content="Polish">
  <title>Bad Blaster - README</title>
  
  <style type="text/css"><!--
    TABLE.key_list { width: 90%; }
    TABLE.key_list TH { background: #eeeee0; }
    TABLE.key_list TD { background: #ddddd0; }
  --></style>
</head>
<body>
      
<h1>Bad Blaster</h1>
Projekt na zaliczenie æwiczeñ z OCamla.<br> 
Michalis Kamburelis (<a href="mailto:michalis@camelot.homedns.org">email</a>,
<a href="http://www.camelot.homedns.org/~michalis/">strona WWW</a>).<br>

<p>To jest wolne oprogramowanie, mo¿na je modyfikowaæ i rozprowadzaæ na
warunkach GNU General Public License, patrz <a href="COPYING">COPYING</a>.

<p>Spis tre¶ci tej strony:
<ul>
  <li><a href="#section_compiling">Kompilacja</a>
  <li><a href="#section_using">Uruchamianie programu, dostêpne klawisze</a>
  <li><a href="#section_coding_conventions">Konwencje kodowania</a>  
  <li><a href="#section_resources">¬ród³a obrazków</a>
</ul>

<a href="apidoc/index.html">Patrz tak¿e: dokumentacja modu³ów Bad Blastera</a>

<p><table style="background: #ddddd0"><tr><td>
Wa¿ne: aby mo¿na by³o uruchomiæ program nale¿y rozpakowaæ
wszystko do katalogu <tt>~/.badBlaster.data/</tt> (tzn. podkatalogu 
<tt>.badBlaster.data</tt> w swoim katalogu domowym) lub
<tt>/usr/local/share/badBlaster/</tt> (w zale¿no¶ci od tego czy 
instalujemy z prawami roota dla wszystkich u¿ytkowników czy te¿
instalujemy tylko dla siebie). Oczywi¶cie mo¿na te¿ rozpakowaæ wszystko
do dowolnego katalogu i uczyniæ jeden z dwóch wymienionych wy¿ej
katalogów zwyk³ym symlinkiem do faktycznego katalogu. Je¿eli 
nie zrobimy tego to gra nie bêdzie mog³a za³adowaæ u¿ywanych obrazków,
a wiêc nie bêdzie mog³a siê poprawnie uruchomiæ !
</table>

<h3><a name="section_compiling">Kompilacja</a></h3>

Rzeczy niezbêdne do kompilacji: 
<ul>
  <li><p>Oczywi¶cie <a href="http://caml.inria.fr/ocaml/">ocaml</a>.
    
  <li><p>SDL. Program linkuje siê dynamicznie (za po¶rednictwem OcamlSDL) 
    z zasadnicz± bibliotek± SDLa oraz z bibliotek± SDL_image. 
    Wszelka dokumentacja, ¼ród³a i gotowe, skompilowane biblioteki 
    pod ró¿ne systemy operacyjne s± dostêpne z 
    <a href="http://www.libsdl.org/">oficjalnej strony libsdl</a>.
    Pod Linuxem mo¿emy te¿ poszukaæ pakietu w u¿ywanej dystrybucji,
    w moim Debianie pakiety <tt>libsdl1.2</tt> i <tt>libsdl-image1.2</tt>
    daj± wszystko co potrzebne jest mojej grze (ale kompilacja
    SDLa, mimo ¿e prawdopodobnie bêdzie zbêdna, te¿ idzie bezproblemowo 
    pod Linuxem).
    
    <p>Pod Windowsem (Cygwinem) jest nieco gorzej, musimy skompilowaæ SDLa
    samemu i nie wszystko idzie tak g³adko. 
    Mam do tego odpowiednie instrukcje ale nie za³±czam ich
    tutaj bo i tak nie umiem skompilowaæ OcamlSDL wiêc tak czy siak 
    Windows chwilowo odpada.
    
  <li><p>OcamlSDL. <a href="http://ocamlsdl.sourceforge.net/home.html">Strona 
    domowa projektu na sourceforge</a>. U¿ywa³em najnowszej wersji,
    ocamlsdl-0.6.3. Pod Linuxa mo¿emy ¶ci±gn±æ ¼ród³a ze wspomnianej wy¿ej strony
    i skompilowaæ (przynajmniej u mnie idzie to bez problemu,
    ./configure + make + make install)
    ale w niektóyrych dystrybucjach mo¿emy te¿ znale¼æ gotowe pakiety
    - pod moim Debianem mam pakiety <tt>libsdl-ocaml-dev</tt> i
    <tt>libsdl-ocaml</tt> które sprawiaj± ¿e nie trzeba nawet nic 
    kompilowaæ. 
    
    <p>Pod Windowsem (Cygwinem) jak ju¿ wspomnia³em mam problemy których 
    nie umiem rozwi±zaæ.
    
  <li><p>Makefile u¿ywa poleceñ UNIXowych, ponadto raczej nie zostanie
    zrozumiany przez make'a innego ni¿ GNU.
    Dlatego wymagany jest GNU make i programy rm, mv, mkdir, sed.
    Pod Linuxem wszystko to standard. 
    
    <!--, pod Windowsem polecam Cygwina 
    (Cygwin jest Panu znany wiêc pomijam tu szczegó³y jego instalacji).
    -->    
</ul>

<p>Je¿eli wszystkie wymienione powy¿ej rzeczy s± ju¿ zainstalowane
to proste polecenie <tt>make</tt> w katalogu projektu powinno 
zbudowaæ plik <tt>badBlaster</tt>, wersjê programu w bytecode.
Inne wa¿ne cele zdefiniowane w tym Makefile'u:
<ul>
  <li><tt>badBlaster.opt</tt> - skompiluje program do kodu natywnego
  <li><tt>htmldoc</tt> - wygeneruje dokumentacjê przez <tt>ocamldoc</tt>
    do podkatalogu <tt>apidoc/</tt>
  <li>Czyszczenie : <tt>clean</tt> wyczy¶ci wszystko co zosta³o
    zbudowane podczas kompilacji <tt>badBlaster</tt> i
    <tt>badBlaster.opt</tt>, <tt>cleandoc</tt> usunie dokumentacjê,
    <tt>reallyclean</tt> zrobi <tt>clean</tt>, <tt>cleandoc</tt>
    i jeszcze usunie backupy Emacsa (<tt>*~</tt>).
</ul>

<h3><a name="section_using">Uruchamianie programu, dostêpne klawisze</a></h3>

<p>Poni¿sza sekcja jest dokumentacj± dla typowego u¿ytkownika 
(tzn. kogo¶ kto nie musi siê martwiæ kompilacj± programu
i czytaniem jego ¼róde³).

<p>Zaraz po uruchomieniu program wy¶wietla ma³e menu z którego mo¿na zacz±æ
grê, zakoñczyæ program i skonfigurowaæ ilo¶æ i rodzaje przeciwników 
na planszy (przyciskaj <tt>s</tt> aby zwiêkszyæ ilo¶æ przeciwników 
o inteligencji "stupido", <tt>Shift+s</tt> aby zmniejszyæ t± ilo¶æ, 
<tt>n</tt> aby zwiêkszyæ ilo¶æ przeciwników o inteligencji "sniper" itd.).

<table class="key_list" border="1">
  <tr><th colspan="2">Klawisze w menu startowym:
  <tr><td>enter <td>rozpocznij grê
  <tr><td>q <td>wyjd¼ z programu
  <tr><td>s / S <td> zwiêksz / zmniejsz liczbê statków komputera typu <i>stupido</i>
  <tr><td>n / N <td> zwiêksz / zmniejsz liczbê statków komputera typu <i>sniper</i>
  <tr><td>i / I <td> zwiêksz / zmniejsz liczbê statków komputera typu <i>quickie</i>
  <tr><td>p <td> w³±czaj / wy³±czaj poruszanie siê planety

  <tr><th colspan="2">Klawisze dostêpne w czasie gry:
  <tr><td>prawo, lewo <td>obracaj statkiem
  <tr><td>góra <td>leæ do przodu
  <tr><td>spacja <td>strzelaj (mo¿na strzelaæ tylko kiedy nie ¶wieci
    siê na dole napis "NO ROCKET")
  <tr><td>p <td>pauza
  <tr><td>F10 <td>zrzuæ aktualny ekran (save screen) do pliku bb_screen&lt;int&gt;.bmp  
  <tr><td>escape <td>zakoñcz grê
    
  <tr><th colspan="2">Klawisze dostêpne gdy pojawia siê koñcowy tekst ("game over"):
  <tr><td>enter, escape  <td>zakoñcz grê
</table>

<p>Program rozpoznaje kilka opcji z linii poleceñ, uruchom program 
z parametrem <tt>--help</tt> aby dostaæ krótki opis. 

<p>Przede wszystkim
u¿yteczna jest opcja <tt>--board WIDTHxHEIGHT</tt> która ustala wielko¶æ
okienka a wiêc jednocze¶nie wielko¶æ planszy na której odbywa siê gra.
Domy¶lnie uruchamiane jest okienko 640x480, u¿ywaj±c tego parametru
mo¿na t± wielko¶æ zwiêkszyæ w granicach osi±galnej rozdzielczo¶ci 
ekranu (czêsto bêdzie tu przydatna inna opcja: <tt>--fullscreen</tt>).
Polecam wypróbowanie ma³ego skryptu <tt>bb800x600</tt> w katalogu gry.
Ustawianie mniejszych rozmiarów ni¿ 640x480 <i>oficjalnie nie jest dozwolone</i>
co znaczy tyle ¿e program nie bêdzie protestowa³ ale
dla zbyt ma³ego okienka ró¿ne rzeczy mog± nie dzia³aæ poprawnie. Wiêc u¿ywaj
tego tylko do celów testowych.

<h3><a name="section_coding_conventions">Konwencje kodowania</a></h3>

<p>Moje konwencje nazewnictwa w OCamlu (skrzy¿owanie moich nawyków
z wymaganiami OCamla który narzuca regu³y na to jak± liter± zaczyna siê 
identyfikator; mniej wiêcej pod±¿ajace za ogólnie przyjêtymi konwencjami OCamla
jakie widzialem w modu³ach OCamla (standardowych, CamlImage,
OcamlSDL, LablGL)):
<ul>
  <li>Klasy: <tt>c_moja_klasa</tt>
  <li>Wyjatki: <tt>E_Moj_Wyjatek</tt>
  <li>Typy: <tt>t_moj_typ</tt>
  <li>Atrybuty obiektów:<br>
    pole wewnêtrzne: <tt>f_moje_pole</tt> <br>
    funkcja "get": <tt>moje_pole</tt> <br>
    funkcja "set": <tt>set_moje_pole</tt> <br>    
  <li>Normalne funkcje, metody, zmienne: <tt>moja_funkcja</tt>, <tt>moja_zmienna</tt>
  <li>Modu³y: <tt>MojModul</tt> w pliku <tt>mojModul.ml</tt>. 
    W tym projekcie modu³y specyficzne dla mojej gry maj± nazwy zaczynaj±ce 
    siê od "bb" (jak "Bad Blaster"). Pozosta³e modu³y (SdlUtils i Base) traktujê
    jako rzeczy ogólne które mog± mi siê jeszcze niejednokrotnie przydaæ gdy bêdê
    chcia³ napisaæ co¶ w OCamlu.
</ul>

<p>Komentarze mam zwyczaj pisaæ czasem po polsku a czasem po angielsku,
bo kiedy programujê to my¶lê w obu tych jezykach; najwa¿niejsze
komentarze w plikach ".mli" (które trafiaj± do dokumentacji w HTMLu) 
postara³em siê ju¿ zamieniæ na polski. 
Polski tekst w komentarzach (przynajmniej w plikach .mli) pisany jest 
z polskimi ogonkami w ISO-8859-2,
wygenerowan± przez ocamldoc dokumentacjê w HTMLu przetwarzam w 
Makefile sed'em tak ¿eby w HTMLu by³o zapisane ¿e u¿ywam ISO-8859-2.

<p>Ale identyfikatory poza komentarzami staram siê zawsze pisaæ
po angielsku.

<p>Przyj±lem zasadê ¿e w interfejsach modulow (.mli) nie bêdê u¿ywa³ open, 
¿eby dla czytaj±cego kod by³o jasne z jakiego modu³u pochodz±
dane typy.

<h3><a name="section_resources">¬ród³a obrazków</a></h3>

<p>Ró¿ne obrazki których u¿y³em w grze generalnie nie s± moje. 
Wiêkszo¶æ z nich ¶ci±gn±³em z Internetu i trochê przerobi³em
do swoich potrzeb.

<ul>
  <li>mars.png z <a href="http://quest.arc.nasa.gov/mars/photos/">
    http://quest.arc.nasa.gov/mars/photos/</a> (przerobiony w GIMPie)
  <li>bg_tileable.png z 
    <a href="http://www.deepskyphoto.com/">http://www.deepskyphoto.com/</a>
    (przerobiony w GIMPie)
  <li>player/comp_ship_strip.png : wyrenderowany w Blenderze model starfury
    z <a href="http://www.blenderwars.com/">http://www.blenderwars.com/</a>, 
    przerabiany w GIMPie, obracany skryptami z u¿yciem ImageMagicka,
    sklejany w jeden pasek w³asnym programem.
  <li>font_002.png z <a href="http://www.algonet.se/~guld1/freefont.htm">
    http://www.algonet.se/~guld1/freefont.htm</a>, oczywi¶cie przerabiany
    w GIMPie
</ul>

<p>
<address>Michalis Kamburelis, styczeñ 2004</address>

</body>
</html>